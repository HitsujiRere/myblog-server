---
import { getCollection, render } from "astro:content";
import App from "../../layouts/App.astro";

export async function getStaticPaths() {
  const entries = await getCollection("blog");
  return entries.map((entry) => ({
    params: { id: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content, headings } = await render(entry);
---

<App>
  <h1>{entry.data.title}</h1>

  <ul class="ml-8 list-disc">
    {
      headings.map((heading) => (
        <li>
          <a href={`#${heading.slug}`}>
            {heading.text}, {heading.depth}
          </a>
        </li>
      ))
    }
  </ul>

  <Content frontmatter={entry.data} />
</App>
